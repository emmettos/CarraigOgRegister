<!-- Most id's are used for unit testing -->
<div>
  <div class="row text-center">
    <div class="col-md-12">
      <h2>CarraigOg Players</h2>
    </div>
  </div>
  <br />  
  <form [formGroup]="managePlayersForm" (ngSubmit)="onSubmit(managePlayersForm.value)" novalidate>
    <div class="row">
      <div class="form-group col-md-2 offset-md-4">
        <div class="input-group">
          <input  type="text"
                  id="date-of-birth" 
                  formControlName="dateOfBirth"
                  name="dateOfBirth"
                  class="form-control" 
                  [ngClass]="{'is-invalid': managePlayersForm.controls.dateOfBirth.invalid && managePlayersForm.controls.dateOfBirth.touched}"
                  placeholder="yyyy-MM-dd"
                  ngbDatepicker 
                  #dateOfBirthPicker="ngbDatepicker"
                  (change)="onDateOfBirthChange()"
                  (dateSelect)="onDateOfBirthPickerChange($event)">
          <div class="input-group-append">
            <button type="button" 
                    class="btn btn-outline-secondary" 
                    (click)="dateOfBirthPicker.toggle()">
              <i class="fa fa-calendar"></i>
            </button>
          </div>
        </div>
        <app-validation-message [control]="managePlayersForm.controls.dateOfBirth"></app-validation-message>
      </div>
      <div class="form-group col-md-2">
        <input  type="submit" 
                class="btn btn-info" 
                [disabled]="currentState !== formState.SearchForPlayer || managePlayersForm.controls['dateOfBirth'].invalid"
                value="Search Players">
      </div>
    </div>
    <hr/>
    <div class="table-responsive" [hidden]="currentState !== formState.PlayersFound">
      <table id="players-table" class="table table-bordered table-striped table-hover select-row">
        <thead>
          <tr>
            <th>Status</th>
            <th>Surname</th>
            <th>First Name</th>
            <th>Address Line 1</th>
            <th>Address Line 2</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let currentPlayer of matchedPlayers" [class.missing]="currentPlayer.playerState === playerState.Missing" (click)="onClickRow(currentPlayer)">
            <td><span class="badge detail-badge" [ngClass]="playerStateCSSClass(currentPlayer)"> </span></td>
            <td>{{ currentPlayer.surname }}</td>
            <td>{{ currentPlayer.firstName }}</td>
            <td>{{ currentPlayer.addressLine1 }}</td>
            <td>{{ currentPlayer.addressLine2 }}</td>
            <td class="text-center"><a href=""><span (click)="!!onClickEditPlayer($event, currentPlayer)">Edit</span></a></td>
            <td class="text-center"><a href=""><span (click)="!!onClickDeletePlayer($event, currentPlayer)">Delete</span></a></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="row text-center">
      <div id="message-panel" class="col-md-12">
        <p class="text-info" [hidden]="currentState !== formState.SearchForPlayer">Players matching the entered Date of Birth will display here</p>
        <p class="text-info" [hidden]="currentState !== formState.NoPlayersFound">No existing players found.</p>
      </div>
    </div>
    <hr/>
    <div class="form-row my-2">
      <div class="col-md-10 offset-md-1">
        <input  type="button" 
                id="add-player" 
                class="btn btn-info btn-block" 
                [hidden]="currentState === formState.SearchForPlayer"
                (click)="onClickAddPlayer()" 
                value="Add New Player">
      </div>
    </div>
  </form>
</div>
<!--
<p>Form values: {{ managePlayersForm.value | json }}</p>
<p>Form status: {{ managePlayersForm.status }}</p>
-->